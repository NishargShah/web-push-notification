(this["webpackJsonpweb-push-notification"]=this["webpackJsonpweb-push-notification"]||[]).push([[0],{30:function(e,t,n){},32:function(e,t,n){"use strict";n.r(t);var r=n(7),a=n.n(r),o=n(10),s=n(12),c=n(18),i=n.n(c),u=n(19),p="".concat("/web-push-notification/","firebase-messaging-sw.js"),l="BEFYw-8jbHc-vf0JcuDhYIbFDakFY2jq2ckoivIBMrK7mSIGv63UvbqQdmGB6xLqcEXedzX25UvraNTP9w1wBNw",g={apiKey:"AIzaSyC_rH4aQic8PDM63rKEmusgM4q74oWKaGI",authDomain:"fir-web-push-notificatio-a1af8.firebaseapp.com",projectId:"fir-web-push-notificatio-a1af8",storageBucket:"fir-web-push-notificatio-a1af8.appspot.com",messagingSenderId:"1088383858101",appId:"1:1088383858101:web:ca4c1f87c1fa89998495fc",measurementId:"G-TQ0LREPX15"},f=n(13),d=(n(29),function(e){return window.localStorage.setItem("sentToServer",e?"1":"0")}),b=function(e){"1"!==window.localStorage.getItem("sentToServer")?(console.debug("Sending token to server...",e),d(!0)):console.debug("Token already sent to server so won't send it again unless it changes")},v={init:function(){var e=Object(o.a)(a.a.mark((function e(){var t,n,r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f.a.initializeApp(g),t=f.a.messaging(),console.debug("Supported?",f.a.messaging.isSupported()),e.prev=3,e.next=6,navigator.serviceWorker.register(p);case 6:return n=e.sent,e.next=9,Notification.requestPermission();case 9:if("granted"!==e.sent){e.next=32;break}return console.debug("Notification permission granted."),e.prev=12,e.next=15,t.getToken({vapidKey:l,serviceWorkerRegistration:n});case 15:if(!(r=e.sent)){e.next=23;break}return e.next=19,b(r);case 19:localStorage.setItem("current_token",r),console.debug("General Token",r),e.next=25;break;case 23:console.debug("No Instance ID token available. Request permission to generate one."),d(!1);case 25:e.next=30;break;case 27:e.prev=27,e.t0=e.catch(12),console.debug("[ERROR] Token not received",e.t0);case 30:e.next=33;break;case 32:console.debug("Unable to get permission to notify.");case 33:console.debug("Registration successful, scope is:",n.scope),e.next=39;break;case 36:e.prev=36,e.t1=e.catch(3),console.debug("[ERROR] Service worker registration failed",e.t1);case 39:t.onMessage((function(e){console.log("Message received",e)}));case 40:case"end":return e.stop()}}),e,null,[[3,36],[12,27]])})));return function(){return e.apply(this,arguments)}}()},m=n.p+"static/media/icon.7722d415.png",h=(n(30),n(9)),k=function(){Object(s.useEffect)((function(){Object(o.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v.init());case 1:case"end":return e.stop()}}),e)})))()}),[]);var e=function(){var e=Object(o.a)(a.a.mark((function e(){var t,n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=u.a.messaging(),e.next=4,t.getToken({vapidKey:l});case 4:return n=e.sent,console.log(n),e.abrupt("return",n);case 9:e.prev=9,e.t0=e.catch(0),console.error("ERROR",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"App",children:[Object(h.jsxs)("header",{className:"App-header",children:[Object(h.jsx)("img",{src:m,className:"App-logo",alt:"icon"}),Object(h.jsx)("h1",{className:"App-title",children:"Welcome to the web push notification demo!"})]}),Object(h.jsx)("button",{onClick:e,children:"Click here to get your token"})]})};i.a.render(Object(h.jsx)(k,{}),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.8a9912ae.chunk.js.map